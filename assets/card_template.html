<html>  
	<head>   
		<link rel="stylesheet" type="text/css" href="file:///android_asset/flashcard_css" />
		<script type="text/javascript">
		var availableWidth = 0;
		
		function init() {
			alert("init");
			var imgs = document.getElementsByTagName('img');
			var n = imgs.length;
			while (n--) {
				addEvent(imgs[n], 'load', resizeImage);
			}
		}

		function addEvent(obj, ev, fn) {
			alert("addEvent = " + ev);
			if (obj.addEventListener) {
				obj.addEventListener(ev, fn, false);
			} else if (obj.attachEvent) {
				obj.attachEvent('on' + ev, fn);
			}
		}

		function resizeImage(e)
		{
			if (!e) var e = window.event;
			var img = e.currentTarget || e.srcElement;
			
			alert("img src = " + img.src);
			alert("availableWidth = " + availableWidth);
			
			var newImg = new Image();
			newImg.src = img.src;
			var imageHeight = newImg.height;
			var imageWidth = newImg.width;
			alert ("The image size is " + imageWidth + "*" + imageHeight);
			
			if(imageHeight != 0 && imageWidth != 0)
			{
				if(imageWidth >  availableWidth)
				{
					var scaleFactor = imageWidth / availableWidth;
					alert("scale factor = " + scaleFactor);
					imageHeight = imageHeight / scaleFactor;
					alert("Scaled height = " + imageHeight);
					imageWidth = imageWidth / scaleFactor;
					alert("Scaled width = " + imageWidth);
				}
			
				img.height = imageHeight;
				img.width = imageWidth;
			}
			else
			{
			 	img.height = 0;
			 	img.width = 0;
				img.src = img.src;
			}
		}
		</script>
	</head> 
	<body> 
		<span class="card">::content::</span>
		<script type="text/javascript">
			init();
		</script>
	</body>
</html>
